# Environment namespace (recommended)
# - Use separate API keys per environment.
# - Prefer separate Redis instances per environment in production.
#
# NOTE: `.env` files do not expand variables automatically, so set full values.

# `dev` | `prod`
APP_ENV=dev

# Optional overrides (defaults derive from `APP_ENV`)
# BULL_PREFIX=crave:dev
# LLM_RATE_LIMIT_PREFIX=crave:dev:llm-rate-limiter

# Disable background schedulers (useful for test runs)
TEST_COLLECTION_JOBS_ENABLED=false
UNIFIED_PROCESSING_DRY_RUN=false
TEST_DRY_RUN=false

# LLM system instruction cache Redis key (selected by `APP_ENV`)
LLM_SYSTEM_CACHE_REDIS_KEY_DEV=crave:dev:llm:system-instruction-cache
LLM_SYSTEM_CACHE_REDIS_KEY_PROD=crave:prod:llm:system-instruction-cache
LLM_QUERY_RESULT_CACHE_REDIS_KEY_DEV=crave:dev:llm:query-analysis
LLM_QUERY_RESULT_CACHE_REDIS_KEY_PROD=crave:prod:llm:query-analysis

# LLM API key (selected by `APP_ENV`)
LLM_API_KEY_DEV=
LLM_API_KEY_PROD=
LLM_QUERY_TIMEOUT=0
LLM_QUERY_LOG_OUTPUTS=false
LLM_THINKING_ENABLED=true
LLM_THINKING_LEVEL=LOW
LLM_QUERY_THINKING_LEVEL=MINIMAL
LLM_THINKING_INCLUDE_THOUGHTS=false
LLM_THINKING_BUDGET=0
LLM_DEBUG_THOUGHTS_ONCE=false
LLM_DEBUG_THOUGHTS_QUERY=true
LLM_DEBUG_THOUGHTS_CONTENT=true
LLM_DEBUG_THOUGHTS_MAX_CHARS=0
LLM_DEBUG_THOUGHTS_MAX_QUERIES=1
LLM_DEBUG_THOUGHTS_MAX_CONTENT_CHUNKS=1
LLM_DEBUG_THOUGHTS_WRITE_FILE=false
LLM_DEBUG_THOUGHTS_FILE_PATH_QUERY=apps/api/logs/llm-thought-debug-query.json
LLM_DEBUG_THOUGHTS_FILE_PATH_CONTENT=apps/api/logs/llm-thought-debug-content.json
LLM_HEADERS_TIMEOUT_MS=120000
LLM_BODY_TIMEOUT_MS=300000
LLM_CONNECT_TIMEOUT_MS=30000
LLM_QUERY_RESULT_CACHE_TTL_SECONDS=0
LLM_QUERY_RESULT_CACHE_VERSION=v1
LLM_QUERY_RESULT_CACHE_LOCAL_TTL_SECONDS=0
LLM_QUERY_RESULT_CACHE_LOCAL_MAX_ENTRIES=0
LLM_QUERY_RESULT_CACHE_INCLUDE_METADATA=false
ENTITY_RESOLUTION_CACHE_REDIS_KEY_DEV=crave:dev:entity-resolution
ENTITY_RESOLUTION_CACHE_REDIS_KEY_PROD=crave:prod:entity-resolution
ENTITY_RESOLUTION_CACHE_TTL_SECONDS=0
ENTITY_RESOLUTION_CACHE_NEGATIVE_TTL_SECONDS=0
ENTITY_RESOLUTION_CACHE_LOCAL_TTL_SECONDS=0
ENTITY_RESOLUTION_CACHE_LOCAL_MAX_ENTRIES=0
ENTITY_RESOLUTION_CACHE_VERSION=v1

# Google Places API key (selected by `APP_ENV`)
GOOGLE_PLACES_API_KEY_DEV=
GOOGLE_PLACES_API_KEY_PROD=
GOOGLE_PLACES_TIMEOUT=10000
GOOGLE_PLACES_DEFAULT_RADIUS=5000

# Google Moderation API (selected by `APP_ENV`)
GOOGLE_MODERATION_API_KEY_DEV=
GOOGLE_MODERATION_API_KEY_PROD=
GOOGLE_MODERATION_ENDPOINT=https://contentmoderation.googleapis.com/v1beta/moderations:moderateText

# Reddit API credentials (selected by `APP_ENV`)
REDDIT_CLIENT_ID_DEV=
REDDIT_CLIENT_ID_PROD=
REDDIT_CLIENT_SECRET_DEV=
REDDIT_CLIENT_SECRET_PROD=
REDDIT_USERNAME_DEV=
REDDIT_USERNAME_PROD=
REDDIT_PASSWORD_DEV=
REDDIT_PASSWORD_PROD=

# Fail-fast circuit breakers (ignored in prod)
LLM_MAX_CONSECUTIVE_RATE_LIMITS=3
REDDIT_MAX_CONSECUTIVE_RATE_LIMITS=3

# Rank score refresh window (minutes)
RANK_SCORE_REFRESH_WINDOW_MINUTES=30

# Restaurant enrichment
RESTAURANT_ENRICHMENT_CONCURRENCY=5
